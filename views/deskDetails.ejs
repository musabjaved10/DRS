<% layout("./layout/boilerplate") %>
<link href="/vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet">
<!-- Sidebar -->
<div class="d-flex flex-row-reverse justify-content-between">

    <div>
        <ul class="d-flex navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

            <!-- Divider -->
            <hr class="sidebar-divider">
            <li class="nav-item active">
                <a class="nav-link text-center" href="">
                    <span><strong>Floors</strong></span></a>
            </li>


            <!-- Nav Item - Charts -->
            <% for(let desk of deskResult){ %>
                <li class="nav-item">
                    <a class="nav-link" href="/desk/<%= desk.desk_id %>">
                        <i class="fas fa-fw fa-chart-area"></i>
                        <span><%= desk.desk_name %></span>
                    </a>
                </li>
            <% } %>

            <!-- Divider -->
            <hr class="sidebar-divider d-none d-md-block">

            <!-- Sidebar Toggler (Sidebar) -->
            <div class="text-center d-none d-md-inline">
                <a href="<%= returnTO %>" class="btn btn-primary btn-circle btn-sm">
                    <i class="fas fa-long-arrow-alt-left"></i>
                </a>
            </div>

        </ul>
        <!--        End of side bar-->
    </div>
    <!--    Desk table-->
    <div class="container-fluid">


        <!-- DataTales Example -->
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Hello from</h6>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                        <thead>
                        <tr>
                            <th>Desk Name</th>
                            <th>Status</th>
                            <th>Booked By</th>
                            <th>Options</th>


                        </tr>
                        </thead>
                        <tbody>
                        <%for(let desk of deskResult){%>
                        <tr>
                            <td><a href="/"><%=desk.desk_name%></a></td>
                            <td><%=desk.desk_status%></td>
                            <td><%=desk.booked_by.includes(`${currentUser.name} ${currentUser.surname}`) ? "You" : desk.booked_by%></td>
                            <td>
                                <form action="/book" method="post">
                                    <div class="d-none">
                                        <input type="text" value="<%=desk.room_id%>" name="room_id">
                                        <input type="text" value="<%=desk.desk_id%>" name="desk_id">
                                    </div>
                                    <button class="btn btn-success" <%=desk.desk_status==="available" ? null : "disabled" %>   >Book Now</button>
                                </form>
                            </td>

                        </tr>
                        <%}%>


                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>


</div>
<!-- Page content (insert things here) -->

<!-- End ofPage content (insert things above) -->

<!-- End of Main Content -->
</div>
<!-- End of Content Wrapper -->
</div>
<!-- End of Page Wrapper -->
